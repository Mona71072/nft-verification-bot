name = "nft-verification-production"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# 環境変数
[vars]
DISCORD_BOT_API_URL = "https://nft-verification-bot.onrender.com"
SUI_NETWORK = "mainnet"
# Claynosaurz Popkinsコレクション
NFT_COLLECTION_ID = "0xb908f3c6fea6865d32e2048c520cdfe3b5c5bbcebb658117c41bad70f52b7ccc::popkins_nft::Popkins"
MINT_SPONSOR_API_URL = "https://nft-verification-bot.onrender.com"
DEFAULT_MOVE_TARGET = "0x7a9695b16975f9a8614a81fc3eb67464699255f42294f4cb7df55e9d8169f506::event_nft::mint_to"
DEFAULT_COLLECTION_CREATE_TARGET = "0x7a9695b16975f9a8614a81fc3eb67464699255f42294f4cb7df55e9d8169f506::event_nft::create_collection"
# Walrus.pdf 準拠の設定（Mainnet）
# 読み出し（Testnet用Aggregator）
WALRUS_AGGREGATOR_BASE = "https://wal-aggregator-testnet.staketab.org"
WALRUS_AGGREGATOR_FALLBACKS = "https://aggregator.suicore.com,https://sui-walrus-mainnet-aggregator.bwarelabs.com,https://walrus-agg.mainnet.obelisk.sh"
# 書き込み（Testnet用Publisher - 認証なしで利用可能）
# Testnet: 公式Publisherが利用可能
WALRUS_PUBLISHER_BASE = "https://wal-publisher-testnet.staketab.org"
# Testnetでは認証不要
WALRUS_PUBLISHER_AUTH = ""
# 保存ポリシー（PDF準拠: 寿命を必ず明示）
WALRUS_DEFAULT_EPOCHS = "12"
WALRUS_DEFAULT_PERMANENT = "false"
# 管理者アドレス
ADMIN_ADDRESSES = "0x645a45e619b62f8179e217bed972bc65281fddee193fc0505566490c7743aa9d"

# KVバインディング
[[kv_namespaces]]
binding = "NONCE_STORE"
id = "dfd1a07f0e704320bd5324fc3102f3ba"

[[kv_namespaces]]
binding = "COLLECTION_STORE"
id = "73186a10a62946718119aa112e87dba9"

[[kv_namespaces]]
binding = "DM_TEMPLATE_STORE"
id = "38a39feef0d049e6b9f7a9d959ce73c1"

[[kv_namespaces]]
binding = "EVENT_STORE"
id = "52be7cb6891d49c099a248c84d85625f"

[[kv_namespaces]]
binding = "MINTED_STORE"
id = "3de15b4862754aeaaf7b9e3dd486e554"

[env.production]
name = "nft-verification-production"

[env.production.vars]
DISCORD_BOT_API_URL = "https://nft-verification-bot.onrender.com"
SUI_NETWORK = "mainnet"
# Claynosaurz Popkinsコレクション
NFT_COLLECTION_ID = "0xb908f3c6fea6865d32e2048c520cdfe3b5c5bbcebb658117c41bad70f52b7ccc::popkins_nft::Popkins"
MINT_SPONSOR_API_URL = "https://nft-verification-bot.onrender.com"
DEFAULT_MOVE_TARGET = "0x7a9695b16975f9a8614a81fc3eb67464699255f42294f4cb7df55e9d8169f506::event_nft::mint_to"
DEFAULT_COLLECTION_CREATE_TARGET = "0x7a9695b16975f9a8614a81fc3eb67464699255f42294f4cb7df55e9d8169f506::event_nft::create_collection"
# Walrus.pdf 準拠の設定（Mainnet）
WALRUS_AGGREGATOR_BASE = "https://wal-aggregator-testnet.staketab.org"
WALRUS_AGGREGATOR_FALLBACKS = "https://aggregator.suicore.com,https://sui-walrus-mainnet-aggregator.bwarelabs.com,https://walrus-agg.mainnet.obelisk.sh"
# Testnet用Publisher（認証なしで利用可能）
WALRUS_PUBLISHER_BASE = "https://wal-publisher-testnet.staketab.org"
# Testnetでは認証不要
WALRUS_PUBLISHER_AUTH = ""
WALRUS_DEFAULT_EPOCHS = "12"
WALRUS_DEFAULT_PERMANENT = "false"

# KVバインディング
[[env.production.kv_namespaces]]
binding = "NONCE_STORE"
id = "dfd1a07f0e704320bd5324fc3102f3ba"

[[env.production.kv_namespaces]]
binding = "COLLECTION_STORE"
id = "73186a10a62946718119aa112e87dba9"

[[env.production.kv_namespaces]]
binding = "DM_TEMPLATE_STORE"
id = "38a39feef0d049e6b9f7a9d959ce73c1" 

[[env.production.kv_namespaces]]
binding = "EVENT_STORE"
id = "52be7cb6891d49c099a248c84d85625f"

[[env.production.kv_namespaces]]
binding = "MINTED_STORE"
id = "3de15b4862754aeaaf7b9e3dd486e554"

# Cron Schedules（バッチ自動実行）
# より頻繁にチェックしてKV設定を優先する
[triggers]
crons = ["*/5 * * * *"] # 5分ごとにチェック（KV設定で実際の実行を制御）