name = "nft-verification-production"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# 環境変数
[vars]
DISCORD_BOT_API_URL = "https://nft-verification-bot.onrender.com"
SUI_NETWORK = "mainnet"
# Claynosaurz Popkinsコレクション
NFT_COLLECTION_ID = "0xb908f3c6fea6865d32e2048c520cdfe3b5c5bbcebb658117c41bad70f52b7ccc::popkins_nft::Popkins"
MINT_SPONSOR_API_URL = "https://nft-verification-bot.onrender.com"

# KVバインディング
[[kv_namespaces]]
binding = "NONCE_STORE"
id = "dfd1a07f0e704320bd5324fc3102f3ba"

[[kv_namespaces]]
binding = "COLLECTION_STORE"
id = "73186a10a62946718119aa112e87dba9"

[[kv_namespaces]]
binding = "DM_TEMPLATE_STORE"
id = "38a39feef0d049e6b9f7a9d959ce73c1"

[[kv_namespaces]]
binding = "EVENT_STORE"
id = "52be7cb6891d49c099a248c84d85625f"

[[kv_namespaces]]
binding = "MINTED_STORE"
id = "3de15b4862754aeaaf7b9e3dd486e554"

[env.production]
name = "nft-verification-production"

[env.production.vars]
DISCORD_BOT_API_URL = "https://nft-verification-bot.onrender.com"
SUI_NETWORK = "mainnet"
# Claynosaurz Popkinsコレクション
NFT_COLLECTION_ID = "0xb908f3c6fea6865d32e2048c520cdfe3b5c5bbcebb658117c41bad70f52b7ccc::popkins_nft::Popkins"
MINT_SPONSOR_API_URL = "https://nft-verification-bot.onrender.com"

# KVバインディング
[[env.production.kv_namespaces]]
binding = "NONCE_STORE"
id = "dfd1a07f0e704320bd5324fc3102f3ba"

[[env.production.kv_namespaces]]
binding = "COLLECTION_STORE"
id = "73186a10a62946718119aa112e87dba9"

[[env.production.kv_namespaces]]
binding = "DM_TEMPLATE_STORE"
id = "38a39feef0d049e6b9f7a9d959ce73c1" 

[[env.production.kv_namespaces]]
binding = "EVENT_STORE"
id = "52be7cb6891d49c099a248c84d85625f"

[[env.production.kv_namespaces]]
binding = "MINTED_STORE"
id = "3de15b4862754aeaaf7b9e3dd486e554"

# Cron Schedules（バッチ自動実行）
# より頻繁にチェックしてKV設定を優先する
[triggers]
crons = ["*/5 * * * *"] # 5分ごとにチェック（KV設定で実際の実行を制御）